{"data":{"site":{"siteMetadata":{"disqusShortname":"pasdam-github-io","title":"/dev/null"}},"markdownRemark":{"id":"80253b40-5af2-551e-93eb-fbf774f9585a","frontmatter":{"date":"June 09, 2019","title":"Use Android SDK Manager with Java 11","tags":["android sdk","bug","java","openjdk"]},"html":"<p>Since with the release 11 some deprecated packages used by the Android SDK <a href=\"https://openjdk.java.net/jeps/320\">were removed</a>, it's not yet possible to run it with the latest Java versions. As a workaround it's possible to download the required classes separately and add them to the classpath, or install the latest supported version, java 1.8. This latter approach is the recommended one.</p>\n<!-- intro_end -->\n<h2 id=\"exception-with-newer-java-versions\"><a href=\"#exception-with-newer-java-versions\" aria-label=\"exception with newer java versions permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Exception with newer Java versions</h2>\n<p>When using the sdk with newes version of Java the following exception will happen:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">$ $ANDROID_HOME/tools/bin/sdkmanager\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: javax/xml/bind/annotation/XmlSchema\n    at com.android.repository.api.SchemaModule$SchemaModuleVersion.&lt;init&gt;(SchemaModule.java:156)\n    at com.android.repository.api.SchemaModule.&lt;init&gt;(SchemaModule.java:75)\n    at com.android.sdklib.repository.AndroidSdkHandler.&lt;clinit&gt;(AndroidSdkHandler.java:81)\n    at com.android.sdklib.tool.sdkmanager.SdkManagerCli.main(SdkManagerCli.java:73)\n    at com.android.sdklib.tool.sdkmanager.SdkManagerCli.main(SdkManagerCli.java:48)\nCaused by: java.lang.ClassNotFoundException: javax.xml.bind.annotation.XmlSchema\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:583)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\n    ... 5 more</code></pre></div>\n<p>As said this is because some packaged required by the SDK were removed in Java 11.</p>\n<h2 id=\"install-old-version-of-java\"><a href=\"#install-old-version-of-java\" aria-label=\"install old version of java permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Install old version of java</h2>\n<p>Just download the desired version of the <a href=\"https://www.oracle.com/technetwork/java/javase/downloads/index.html\">JDK</a>;</p>\n<p>On macOS is possible to use brew to <a href=\"https://github.com/AdoptOpenJDK/homebrew-openjdk\">install different versions</a>.</p>\n<h2 id=\"switch-between-versions\"><a href=\"#switch-between-versions\" aria-label=\"switch between versions permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Switch between versions</h2>\n<p>To check the installed version of Java on macOS:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">$ /usr/libexec/java_home -V\nMatching Java Virtual Machines (2):\n    11.0.2, x86_64:\t&quot;Java SE 11.0.2&quot;\t/Library/Java/JavaVirtualMachines/jdk-11.0.2.jdk/Contents/Home\n    1.8.0_181, x86_64:\t&quot;Java SE 8&quot;\t/Library/Java/JavaVirtualMachines/jdk1.8.0_181.jdk/Contents/Home</code></pre></div>\n<p>And to check the current active one:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">$ echo $JAVA_HOME\n/Library/Java/JavaVirtualMachines/jdk-11.0.2.jdk/Contents/Home</code></pre></div>\n<p>or:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">$ java -version\njava version &quot;11.0.2&quot; 2019-01-15 LTS\nJava(TM) SE Runtime Environment 18.9 (build 11.0.2+9-LTS)\nJava HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.2+9-LTS, mixed mode)</code></pre></div>\n<p>To easily switch between the two sdk it's possible to <a href=\"https://github.com/pasdam/devbox-setup/blob/master/dotfiles/aliases/java\">define aliases</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">j11=&#39;export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-11.0.2.jdk/Contents/Home; java -version&#39;\nj8=&#39;export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_181.jdk/Contents/Home; java -version&#39;</code></pre></div>\n<p>so that it's possible to activate the required version with:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\"># activate Java 11:\nj11\n\n# activate Java 1.8\nj8</code></pre></div>\n<h2 id=\"conclusion\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>Now it will be possible to run the Android SDK with:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">j8\n$ANDROID_HOME/tools/bin/sdkmanager</code></pre></div>","tableOfContents":"<ul>\n<li><a href=\"/blog/android_sdk_java_11/#exception-with-newer-java-versions\">Exception with newer Java versions</a></li>\n<li><a href=\"/blog/android_sdk_java_11/#install-old-version-of-java\">Install old version of java</a></li>\n<li><a href=\"/blog/android_sdk_java_11/#switch-between-versions\">Switch between versions</a></li>\n<li><a href=\"/blog/android_sdk_java_11/#conclusion\">Conclusion</a></li>\n</ul>","timeToRead":2}},"pageContext":{"isCreatedByStatefulCreatePages":false}}