<!doctype html><html lang=en><head><meta charset=utf-8><title>Use Android SDK Manager with Java 11 &ndash; /dev/null
</title><link href="https://fonts.googleapis.com/css?family=Work+Sans:600|Quattrocento+Sans:400,400i,700" rel=stylesheet type=text/css><link rel=icon href=https://pasdam.github.io/favicon.svg><link rel=stylesheet href=https://pasdam.github.io/global.min.css><meta name=description content="Guide on how to use Android SDK with Java 11, by manually installing the required classes"><meta name=viewport content="width=device-width,initial-scale=1"><script async src="https://www.googletagmanager.com/gtag/js?id=G-H52BY7123V"></script><script async src=https://pasdam.github.io/copy-code-button.min.js onload='setupCopyButtons("copy","copied!")'></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-H52BY7123V",{cookie_domain:"pasdam.github.io",cookie_flags:"SameSite=None;Secure"})</script><link href=https://cdn.jsdelivr.net/npm/shareon@2/dist/shareon.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/shareon@2/dist/shareon.iife.js defer init></script></head><body><header id=page-header class=bg-green><nav><div class=logo-container><h1 class=logo>/dev/null - Blog</h1></div><script>function toggleClassNameById(e,t){const n=document.getElementById(e).classList;n.contains(t)?n.remove(t):n.add(t)}</script><button data-collapse-toggle=mega-menu type=button class=mega-menu-toggle aria-controls=mega-menu aria-expanded=false onclick='toggleClassNameById("mega-menu","hidden")'>
<span class=sr-only>Open main menu</span><svg class="icon" aria-hidden="true" fill="none" viewBox="0 0 17 14"><path stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 1h15M1 7h15M1 13h15"/></svg></button><div id=mega-menu><ul><li><a href=/>Home</a></li><li><a aria-current=true class=ancestor href=/blog/posts/>Blog</a></li><li><a href=https://github.com/pasdam>GitHub</a></li></ul></div></nav></header><div id=main><article class=post-body><h1 class=text-green>Use Android SDK Manager with Java 11</h1><p class=date-read-time>June 9, 2019 &mdash; 2 Min Read</p><div class=tags><div class=tag><a href=/tags/android-sdk/ class=test>Android SDK</a></div><div class=tag><a href=/tags/bug/ class=test>Bug</a></div><div class=tag><a href=/tags/java/ class=test>Java</a></div><div class=tag><a href=/tags/openjdk/ class=test>OpenJDK</a></div></div><hr><nav id=TableOfContents><ul><li><a href=#exception-with-newer-java-versions>Exception with newer Java versions</a></li><li><a href=#install-old-version-of-java>Install old version of java</a></li><li><a href=#switch-between-versions>Switch between versions</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav><hr><div class=content><p>Since with the release 11 some deprecated packages used by the Android SDK <a href=https://openjdk.java.net/jeps/320>were removed</a>, it&rsquo;s not yet possible to run it with the latest Java versions. As a workaround it&rsquo;s possible to download the required classes separately and add them to the classpath, or install the latest supported version, java 1.8. This latter approach is the recommended one.</p><h2 id=exception-with-newer-java-versions>Exception with newer Java versions</h2><p>When using the sdk with newes version of Java the following exception will happen:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ $ANDROID_HOME/tools/bin/sdkmanager
</span></span><span style=display:flex><span>Exception in thread <span style=color:#e6db74>&#34;main&#34;</span> java.lang.NoClassDefFoundError: javax/xml/bind/annotation/XmlSchema
</span></span><span style=display:flex><span>  at com.android.repository.api.SchemaModule$SchemaModuleVersion.&lt;init&gt;<span style=color:#f92672>(</span>SchemaModule.java:156<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  at com.android.repository.api.SchemaModule.&lt;init&gt;<span style=color:#f92672>(</span>SchemaModule.java:75<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  at com.android.sdklib.repository.AndroidSdkHandler.&lt;clinit&gt;<span style=color:#f92672>(</span>AndroidSdkHandler.java:81<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  at com.android.sdklib.tool.sdkmanager.SdkManagerCli.main<span style=color:#f92672>(</span>SdkManagerCli.java:73<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  at com.android.sdklib.tool.sdkmanager.SdkManagerCli.main<span style=color:#f92672>(</span>SdkManagerCli.java:48<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Caused by: java.lang.ClassNotFoundException: javax.xml.bind.annotation.XmlSchema
</span></span><span style=display:flex><span>  at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass<span style=color:#f92672>(</span>BuiltinClassLoader.java:583<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass<span style=color:#f92672>(</span>ClassLoaders.java:178<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  at java.base/java.lang.ClassLoader.loadClass<span style=color:#f92672>(</span>ClassLoader.java:521<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  ... <span style=color:#ae81ff>5</span> more
</span></span></code></pre></div><p>As said this is because some packaged required by the SDK were removed in Java 11.</p><h2 id=install-old-version-of-java>Install old version of java</h2><p>Just download the desired version of the <a href=https://www.oracle.com/technetwork/java/javase/downloads/index.html>JDK</a>;</p><p>On macOS is possible to use brew to <a href=https://github.com/AdoptOpenJDK/homebrew-openjdk>install different versions</a>.</p><h2 id=switch-between-versions>Switch between versions</h2><p>To check the installed version of Java on macOS:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ /usr/libexec/java_home -V
</span></span><span style=display:flex><span>Matching Java Virtual Machines <span style=color:#f92672>(</span>2<span style=color:#f92672>)</span>:
</span></span><span style=display:flex><span>  11.0.2, x86_64:	<span style=color:#e6db74>&#34;Java SE 11.0.2&#34;</span>	/Library/Java/JavaVirtualMachines/jdk-11.0.2.jdk/Contents/Home
</span></span><span style=display:flex><span>  1.8.0_181, x86_64:	<span style=color:#e6db74>&#34;Java SE 8&#34;</span>	/Library/Java/JavaVirtualMachines/jdk1.8.0_181.jdk/Contents/Home
</span></span></code></pre></div><p>And to check the current active one:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ echo $JAVA_HOME
</span></span><span style=display:flex><span>/Library/Java/JavaVirtualMachines/jdk-11.0.2.jdk/Contents/Home
</span></span></code></pre></div><p>or:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ java -version
</span></span><span style=display:flex><span>java version <span style=color:#e6db74>&#34;11.0.2&#34;</span> 2019-01-15 LTS
</span></span><span style=display:flex><span>Java<span style=color:#f92672>(</span>TM<span style=color:#f92672>)</span> SE Runtime Environment 18.9 <span style=color:#f92672>(</span>build 11.0.2+9-LTS<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Java HotSpot<span style=color:#f92672>(</span>TM<span style=color:#f92672>)</span> 64-Bit Server VM 18.9 <span style=color:#f92672>(</span>build 11.0.2+9-LTS, mixed mode<span style=color:#f92672>)</span>
</span></span></code></pre></div><p>To easily switch between the two sdk it&rsquo;s possible to <a href=https://github.com/pasdam/devbox-setup/blob/master/dotfiles/aliases/java>define aliases</a>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>j11<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-11.0.2.jdk/Contents/Home; java -version&#39;</span>
</span></span><span style=display:flex><span>j8<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_181.jdk/Contents/Home; java -version&#39;</span>
</span></span></code></pre></div><p>so that it&rsquo;s possible to activate the required version with:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># activate Java 11:</span>
</span></span><span style=display:flex><span>j11
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># activate Java 1.8</span>
</span></span><span style=display:flex><span>j8
</span></span></code></pre></div><h2 id=conclusion>Conclusion</h2><p>Now it will be possible to run the Android SDK with:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>j8
</span></span><span style=display:flex><span>$ANDROID_HOME/tools/bin/sdkmanager
</span></span></code></pre></div></div></article><hr><div class=related><h3>See Also:</h3><ul><li><a href=/blog/posts/flutter_fix_unknown_license_status/>Flutter: fix unknown android license status issue</a></li><li><a href=/blog/posts/remove_old_java_macos/>Uninstall older versions of Java from macOS</a></li></ul></div><hr><div class=socialshare><p>Share this</p><div class=shareon><a class=facebook title="Share on Facebook"></a><a class=linkedin title="Share on Linkedin"></a><a class=mastodon title="Share on Mastodon"></a><a class=messenger data-fb-app-id=0123456789012345 title="Share on Messenger"></a><a class=pinterest title="Share on Pinterest"></a><a class=pocket title="Share on Pocket"></a><a class=reddit title="Share on Reddit"></a><a class=telegram title="Share on Telegram"></a><a class=twitter title="Share on Twitter"></a><a class=vkontakte title="Share on Vkontakte"></a><a class=whatsapp title="Share on Whatsapp"></a><a class=copy-url title="Copy link"></a><a class=email title="Share by Email"></a><a class=print title=Print></a></div></div><hr><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//pasdam-github-io.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a>
<button class=hidden id=to-top-button onclick=goToTop() title="Go To Top">
<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chevron-circle-up" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M8 256C8 119 119 8 256 8s248 111 248 248-111 248-248 248S8 393 8 256zm231-113.9L103.5 277.6c-9.4 9.4-9.4 24.6.0 33.9l17 17c9.4 9.4 24.6 9.4 33.9.0L256 226.9l101.6 101.6c9.4 9.4 24.6 9.4 33.9.0l17-17c9.4-9.4 9.4-24.6.0-33.9L273 142.1c-9.4-9.4-24.6-9.4-34 0z"/></svg>
</button>
<script async>const offset=100;var toTopButton=document.getElementById("to-top-button");window.onscroll=function(){document.body.scrollTop>offset||document.documentElement.scrollTop>offset?toTopButton.classList.remove("hidden"):toTopButton.classList.add("hidden")};function goToTop(){window.scrollTo({top:0,behavior:"smooth"})}</script></body></html>